<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>obesity</title>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />

<!-- <script src="//d3js.org/d3.v3.min.js" charset="utf-8"></script> -->
<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script> -->
<script src="https://api.mapbox.com/mapbox-gl-js/v1.9.1/mapbox-gl.js"></script>
<link href="https://api.mapbox.com/mapbox-gl-js/v1.9.1/mapbox-gl.css" rel="stylesheet" />
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>

<style>
	body { margin: 0; padding: 0; }
	#map { position: absolute; top: 0; bottom: 0; width: 100%; }

  .legend {
    position: absolute;
    bottom: 20px;
    right: 40px;
    z-index: 1;
  }

  .legend img {
    max-height: 400px;
    max-width: 400px;
  }
</style>

</head>

<body>



<div id="map"></div>
<div class = "legend">
   <img src="./Legend.png" />
</div>

<script>
mapboxgl.accessToken = 'pk.eyJ1IjoiY2xhdWRpb2EiLCJhIjoiY2s2cXhqZWt2MDA2ODNtcGJjN292NWptYiJ9.7aE7sGFDPHynRMBUXMSgNA';

var map = new mapboxgl.Map({
  container: 'map',
  style: 'mapbox://styles/mapbox/light-v10',
  center: [-94, 40],
  zoom: 4,
});

map.scrollZoom.disable();

map.on('load', function() {

  map.addSource('obesity', {
      'type': 'geojson',
      'data': './obesity.geojson',
    });

		// Use it
		map.addLayer({
			'id': 'obesity(1.77, 25.53)',
			'type': 'fill',
			'source': 'obesity',
			// "source-layer": "original",
			'paint': {
						'fill-color':
						['case', ['<=', ['get', 'fast_food'], 1.77],
							['case', ['<=', ['get', 'obesity'], 25.53],
								'#e8e8e8',
								'#ffffff',
							],
							'#ffffff',
						]
					},
		});

		map.addLayer({
			'id': 'obesity/fast_food',
			'type': 'fill',
			'source': 'obesity',
			'layout': {},
			'paint': {
						'fill-color':
						['case',
							['all', ['<=', ['get', 'fast_food'], 1.77], ['<=', ['get', 'obesity'], 25.53]],
							'rgba(232, 232, 232, 0.6)',
							['all', ['<=', ['get', 'fast_food'], 1.77], ['<=', ['get', 'obesity'], 30.87]],
							// '#ace4e4',
							'rgba(172, 228, 228, 0.6)',
							['all', ['<=', ['get', 'fast_food'], 1.77], ['<=', ['get', 'obesity'], 36.20]],
							// '#5ac8c8',
							'rgba(90, 200, 200, 0.6)',
							['all', ['<=', ['get', 'fast_food'], 3.41], ['<=', ['get', 'obesity'], 25.53]],
							// '#dfb0d6',
							'rgba(223, 176, 214, 0.6)',
							['all', ['<=', ['get', 'fast_food'], 3.41], ['<=', ['get', 'obesity'], 30.87]],
							// '#a5add3',
							'rgba(165, 173, 211, 0.6)',
							['all', ['<=', ['get', 'fast_food'], 3.41], ['<=', ['get', 'obesity'], 36.20]],
							// '#5698b9',
							'rgba(86, 152, 185, 0.6)',
							['all', ['<=', ['get', 'fast_food'], 5.05], ['<=', ['get', 'obesity'], 25.53]],
							// '#be64ac',
							'rgba(190, 100, 172, 0.6)',
							['all', ['<=', ['get', 'fast_food'], 5.05], ['<=', ['get', 'obesity'], 30.87]],
							// '#8c62aa',
							'rgba(140, 98, 170, 0.6)',
							['all', ['<=', ['get', 'fast_food'], 5.05], ['<=', ['get', 'obesity'], 36.20]],
							// '#3b4994',
							'rgba(59, 73, 148, 0.6)',
							// '#000000',
							'rgba(255, 255, 255, 0)',
						],

						// 'fill-opacity': [
						// 	'case',
						// 	['boolean', ['feature-state', 'hover'], false],
						// 		1,
						// 		0.5
						// ]
					},


		});

});
</script>
